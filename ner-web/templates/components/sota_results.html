{% if results.is_empty() %}
<p style="color: var(--text-secondary); font-size: 0.95rem;">Nenhuma entidade encontrada para as categorias solicitadas.
</p>
{% else %}
<div style="display: flex; flex-direction: column; gap: 1rem;">
    {% for res in results %}
    <div
        style="background: var(--surface-light); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; position: relative;">
        <!-- Indicador visual de proximidade (cor de fundo) -->
        <div style="position: absolute; top: 0; left: 0; bottom: 0; width: 6px; background: rgba(59, 130, 246, {{ "
            {:.1}"|format(res.similarity_score * 0.8) }});">
        </div>

        <div
            style="padding: 1rem 1rem 1rem 1.5rem; display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
                <h4 style="margin: 0; color: var(--text-primary); font-size: 1.1rem; line-height: 1.2;">"{{
                    res.entity.text }}"</h4>
                <div style="margin-top: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 0.85rem; color: var(--text-secondary);">Classe Solicitada:</span>
                    <span class="badge badge-rust"
                        style="padding: 0.2rem 0.5rem; font-size: 0.8rem; background-color: rgba(59, 130, 246, 0.2); border-color: rgba(59, 130, 246, 0.5); color: #60a5fa;">{{
                        res.class_name }}</span>
                </div>

                <!-- Barra de Progresso Simbolizando Dot Product -->
                <div style="margin-top: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.2rem;">
                        <span style="font-size: 0.75rem; color: var(--text-secondary);">Similaridade Cos (Dot
                            Product)</span>
                        <span style="font-size: 0.75rem; color: var(--text-primary); font-family: var(--font-mono);">{{
                            "{:.0}"|format(res.similarity_score * 100.0) }}%</span>
                    </div>
                    <div
                        style="width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden;">
                        <div style="height: 100%; width: {{ " {:.0}"|format(res.similarity_score * 100.0) }}%;
                            background: linear-gradient(90deg, #3b82f6, #8b5cf6);">
                        </div>
                    </div>
                </div>

            </div>

            <div
                style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 6px; text-align: center; border: 1px dashed var(--border);">
                <span
                    style="display: block; font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase;">Span
                    Interval</span>
                <span style="font-family: var(--font-mono); font-size: 0.9rem; color: var(--text-primary);">T_{{
                    res.entity.start_token }} - T_{{ res.entity.end_token }}</span>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div
    style="margin-top: 1.5rem; padding: 1rem; border-left: 4px solid var(--accent-magenta); background: rgba(217, 70, 239, 0.05); border-radius: 4px;">
    <p style="margin: 0; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5;">
        Diferente de sistemas baseados em palavras iterativas, na arquitetura Span-Based, nós testamos "pedaços da
        frase" diretamente
        contra a "intenção" (A classe) via multiplicação bidimensional de embbeddings (Dot Product). As entidades acima
        foram as que
        ultrapassaram o gatilho mínimo de segurança para a Intenção Zero-Shot que foi passada.
    </p>
</div>
{% endif %}